# 使用MVVM模式实现UI与逻辑分离

## 实现方案

### 1. 创建ViewModel
- 创建 `HomeViewModel` 类，继承自 `ViewModel`
- 将网络请求逻辑和状态管理移至ViewModel
- 使用 `MutableStateFlow` 管理UI状态
- 使用Hilt进行依赖注入

### 2. 实现状态管理
- 创建 `HomeUiState` 数据类，包含所有UI状态
- 包含banner、文章列表、加载状态、错误信息等
- 使用 `StateFlow` 暴露不可变状态给UI

### 3. 修改HomePage.kt
- 简化HomePage组件，使其只负责UI渲染
- 通过 `viewModel` 获取状态
- 使用 `collectAsState` 收集状态变化
- 处理用户交互事件，调用ViewModel的方法

### 4. 配置依赖注入
- 为 `HomeViewModel` 添加 `@HiltViewModel` 注解
- 在 `HomeViewModel` 中使用 `@Inject` 注入 `NetworkRepository`
- 在 `MainActivity` 中创建并提供 `HomeViewModel` 实例

### 5. 实现数据加载逻辑
- 在 `HomeViewModel` 中实现 `loadData`、`refreshData`、`loadMore` 方法
- 使用 `viewModelScope` 处理协程
- 确保状态更新在主线程执行

## 技术实现细节
- 使用Kotlin协程和Flow进行异步数据处理
- 使用Hilt进行依赖注入
- 遵循Jetpack Compose的最佳实践
- 确保ViewModel的生命周期管理正确

## 预期效果

- UI组件只负责渲染，不包含业务逻辑
- ViewModel负责业务逻辑和状态管理
- 实现了UI与逻辑的完全分离
- 方便进行单元测试
- 代码结构更清晰，易于维护

## 实现步骤

1. 创建 `ui/state` 目录，定义 `HomeUiState`
2. 创建 `ui/viewmodel` 目录，实现 `HomeViewModel`
3. 修改 `HomePage.kt`，使用ViewModel
4. 修改 `MainActivity.kt`，提供ViewModel实例
5. 测试实现是否正确
6. 确保构建成功